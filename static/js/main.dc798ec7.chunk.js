(this.webpackJsonpcarsmap=this.webpackJsonpcarsmap||[]).push([[0],{16:function(t,e,a){t.exports=a(42)},21:function(t,e,a){},40:function(t,e,a){},42:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),o=a(15),r=a.n(o),i=(a(21),a(2)),s=a(5),l=a.n(s),u=a(3),p=a.n(u),m=a(4),d=function t(e){Object(m.a)(this,t),this.discriminator=e.discriminator,this.platesNumber=e.platesNumber,this.sideNumber=e.sideNumber,this.color=e.color,this.type=e.type,this.picture={id:e.picture.id,name:e.picture.name,extension:e.picture.extension,contentType:e.picture.contentType},this.rangeKm=e.rangeKm,this.batteryLevelPct=e.batteryLevelPct,this.reservationEnd=e.reservationEnd,this.reservation=e.reservation,this.status=e.status,this.locationDescription=e.locationDescription,this.address=e.address,this.mapColor={rgb:e.mapColor.rgb,alpha:e.mapColor.alpha},this.promotion=e.promotion,this.id=e.id,this.name=e.name,this.description=e.description,this.location={latitude:e.location.latitude,longitude:e.location.longitude},this.metadata=e.metadata},b=function t(e){Object(m.a)(this,t),this.discriminator=e.discriminator,this.id=e.id,this.name=e.name,this.description=e.description,this.location={latitude:e.location.latitude,longitude:e.location.longitude},this.metadata=e.metadata,this.category=e.category,this.picture=e.picture,this.color={rgb:e.color.rgb,alpha:e.color.alpha}},h=function t(e){Object(m.a)(this,t),this.discriminator=e.discriminator,this.spacesCount=e.spacesCount,this.availableSpacesCount=e.availableSpacesCount,this.color={rgb:e.color.rgb,alpha:e.color.alpha},this.pictureId=e.pictureId,this.id=e.id,this.name=e.name,this.description=e.description,this.location={latitude:e.location.latitude,longitude:e.location.longitude},this.metadata=e.metadata},f=function(t){var e=Object(n.useRef)(0),a=Object(n.useRef)(0),o=Object(n.useRef)(0),r=Object(n.useRef)(0),i=Object(n.useRef)(!1);return Object(n.useEffect)((function(){e.current=p.a.map("map",{center:[49.8419,24.0315],zoom:16,layers:[p.a.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'})]}),a.current=p.a.layerGroup().addTo(e.current),o.current=p.a.layerGroup().addTo(e.current),r.current=p.a.layerGroup().addTo(e.current)}),[]),Object(n.useEffect)((function(){if(t.carParkPoints){r.current.clearLayers(),t.carParkPoints.forEach((function(t,e,a){var n=new h(t),c=p.a.marker([n.location.latitude,n.location.longitude],{icon:p.a.icon({iconUrl:"icons/map/warning/parking-meter-export.png",iconSize:[32,37],popupAnchor:[0,-16]})}).bindPopup(function(t){return"Nazwa: ".concat(t.name," <br />Miejsc:").concat(t.spacesCount," <br />GPS: [").concat(t.location.latitude,", ").concat(t.location.longitude,"]<br />")}(n));r.current.addLayer(c)}))}else r.current.clearLayers()}),[t.carParkPoints]),Object(n.useEffect)((function(){if(t.POIpoints){var e=function(t){var e="caution.png";switch(t){case"Stacje kolejowe":e="train.png";break;case"Krasnale":e="flagman.png";break;default:e="caution.png"}return p.a.icon({iconUrl:"icons/map/primary/"+e,iconSize:[32,37],popupAnchor:[0,-16]})};o.current.clearLayers(),t.POIpoints.forEach((function(t,a,n){var c=new b(t),r=p.a.marker([c.location.latitude,c.location.longitude],{icon:e(c.category)}).bindPopup(function(t){return"Nazwa: ".concat(t.name," <br />Typ:").concat(t.category," <br />GPS: [").concat(t.location.latitude,", ").concat(t.location.longitude,"]<br />")}(c));o.current.addLayer(r)}))}else o.current.clearLayers()}),[t.POIpoints]),Object(n.useEffect)((function(){i.current||(i.current=t.points.map((function(t){return[t.location.latitude,t.location.longitude]})),e.current.fitBounds(i.current));var n=function(t,e){var a="AVAILABLE"===t?"success":"danger",n="TRUCK"===e?"truck3.png":"car.png";return p.a.icon({iconUrl:"icons/map/"+a+"/"+n,iconSize:[32,37],popupAnchor:[0,-16]})};a.current.clearLayers(),t.points.forEach((function(t,e,c){var o=new d(t),r=p.a.marker([o.location.latitude,o.location.longitude],{icon:n(o.status,o.type)}).bindPopup(function(t){return"Typ:".concat(t.type," ").concat(t.platesNumber," <br />Bateria: ").concat(t.batteryLevelPct,"<br /> Status: ").concat(t.status," <br />GPS: [").concat(t.location.latitude,", ").concat(t.location.longitude,"]<br />")}(o));a.current.addLayer(r)}))}),[t.points]),c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{id:"map"})))},g=function(t){var e=t.onChangeFilter,a=c.a.useState(97),o=Object(i.a)(a,2),r=o[0],s=o[1],l=c.a.useState(0),u=Object(i.a)(l,2),p=u[0],m=u[1],d=c.a.useState(!1),b=Object(i.a)(d,2),h=b[0],f=b[1],g=c.a.useState(!1),v=Object(i.a)(g,2),E=v[0],y=v[1];Object(n.useEffect)((function(){e({batteryPercentage:r,status:p,poi:E,carparks:h})}),[p,r,E,h,e]);var j=function(t){var e=r+t;e>=0&&e<=100&&s(e)};return c.a.createElement("div",{className:"map-filter"},c.a.createElement("div",{className:"form-row"},c.a.createElement("div",{className:"form-group col-md-6"},c.a.createElement("div",{className:"input-group mb-3"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text"},"Bateria")),c.a.createElement("div",{className:"form-control"},r),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("span",{className:"input-group-text"},"%"),c.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(){return j(1)},type:"button"},"+"),c.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(){return j(-1)},type:"button"},"-")))),c.a.createElement("div",{className:"form-group col-md-6"},c.a.createElement("div",{className:"input-group mb-3"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("label",{className:"input-group-text",htmlFor:"inputGroupSelect01"},"Status")),c.a.createElement("select",{className:"custom-select",id:"inputGroupSelect01",onChange:function(t){m(t.target.value)},value:p},c.a.createElement("option",{value:"AVAILABLE"},"Dost\u0119pne"),c.a.createElement("option",{value:"UNAVAILABLE"},"Niedostepne"),c.a.createElement("option",{value:"0"},"Wszystkie"))))),c.a.createElement("div",{className:"form-row"},c.a.createElement("div",{className:"form-group col-12"},c.a.createElement("div",{className:"custom-control-inline custom-checkbox pl-4"},c.a.createElement("input",{className:"custom-control-input",onChange:function(t){return function(t){y(t.target.checked)}(t)},type:"checkbox",id:"poiCheck"}),c.a.createElement("label",{className:"custom-control-label",htmlFor:"poiCheck"},"Miejsca POI")),c.a.createElement("div",{className:"custom-control-inline custom-checkbox pl-4"},c.a.createElement("input",{className:"custom-control-input",onChange:function(t){return function(t){f(t.target.checked)}(t)},type:"checkbox",id:"carparksCheck"}),c.a.createElement("label",{className:"custom-control-label",htmlFor:"carparksCheck"},"Parkingi")))))};a(40),a(41);var v=function(){var t=Object(n.useState)(),e=Object(i.a)(t,2),a=e[0],o=e[1],r=Object(n.useState)(),s=Object(i.a)(r,2),u=s[0],p=s[1],m=Object(n.useState)({batteryPercentage:!1,status:0,carparks:!1,poi:!1}),d=Object(i.a)(m,2),b=d[0],h=d[1],v=Object(n.useState)(),E=Object(i.a)(v,2),y=E[0],j=E[1],O=Object(n.useState)(),N=Object(i.a)(O,2),k=N[0],P=N[1],S=Object(n.useState)(),C=Object(i.a)(S,2),L=C[0],w=C[1],I=Object(n.useState)(),x=Object(i.a)(I,2),A=x[0],z=x[1];return Object(n.useEffect)((function(){var t=a;!1!==b.batteryPercentage&&a&&(t=t.filter((function(t){return t.batteryLevelPct>=b.batteryPercentage}))),b.status&&"0"!==b.status&&a&&(t=t.filter((function(t){return new RegExp("^"+b.status+"$").test(t.status)}))),z(!!b.carparks&&L),P(!!b.poi&&y),t&&p(t)}),[b,y,L,a]),Object(n.useEffect)((function(){l.a.get("https://dev.vozilla.pl/api-client-portal/map?objectType=VEHICLE").then((function(t){var e=t.data;p(e.objects),o(e.objects)})),l.a.get("https://dev.vozilla.pl/api-client-portal/map?objectType=POI").then((function(t){var e=t.data;P(e.objects),j(e.objects)})),l.a.get("https://dev.vozilla.pl/api-client-portal/map?objectType=PARKING").then((function(t){var e=t.data;z(e.objects),w(e.objects)}))}),[]),a?c.a.createElement("div",{className:"container mt-3"},c.a.createElement(g,{onChangeFilter:h}),c.a.createElement(f,{points:u,carParkPoints:A,POIpoints:k,mapFilter:b})):c.a.createElement("div",null,"Loading...")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.dc798ec7.chunk.js.map